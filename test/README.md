# VFL model test
The model generated by the VFL training can be evaluated by the test data.

## Test data preparation
You must prepare the test data before evaluating the model. The test data is generated through [Sample data preparation](../README.md#sample-data-preparation). 

## Installing the libraries
1. Clone the repository (If the repository is not cloned yet)
    ```shell
    git clone https://github.com/docomoinnovations/AWS-Serverless-Vertical-Federated-Learning
    cd AWS-Serverless-Vertical-Federated-Learning
    ```

1. Install libraries  
    Run `pip` to install the required libraries.
    ```shell
    cd test
    pip install -r requirements.txt
    ```

## Test the model
Run the command below to test the model (Replace [YourStackName] to the name of the stack deployed at [the stack deployment step](../server/README.md#deploying-the-server))
```shell
python test_model.py --stack-name [YourStackName]
```

The script retrieves the latest VFL models and metadata, and evaluates the accuracy of the model.  
Then, it shows the test result including the training metadata as below:

```shell
ROC-AUC:           0.8117
Task Name:         VFL-Task-YYYY-MM-DD-HH-mm-ss
Total time:        1,187.374s
Number of clients: 4
Batch Size:        1,024
Epoch:             10
Patience:          3
State Machine ARN: arn:aws:states:us-west-2:[AccountID]:stateMachine:FederatedLearningMainStateMachine-0hJwDqsqArbO
Execution ARN:     arn:aws:states:us-west-2:[AccountID]:execution:FederatedLearningMainStateMachine-0hJwDqsqArbO:502df5fc-009d-4435-9cf7-f941f75c2afb
```